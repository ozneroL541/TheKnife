DO $$
BEGIN
	IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'cousine') THEN
        CREATE TYPE COUSINE AS ENUM(
			'Afghan', 'African', 'Alpine', 'Alsatian', 'American', 'American Contemporary', 'Andalusian', 'Apulian', 'Argentinian', 'Armenian', 'Asian', 'Asian Contemporary', 'Asian Influences', 'Asian and Western', 'Asturian', 'Australian Contemporary', 'Austrian', 'Bakery', 'Balinese', 'Balkan', 'Barbecue', 'Basque', 'Bavarian', 'Beef', 'Beijing Cuisine', 'Belgian', 'Brazilian', 'Breton', 'British Contemporary', 'Bulgogi', 'Burgundian', 'Burmese', 'Cajun', 'Calabrian', 'Californian', 'Cambodian', 'Campanian', 'Cantonese', 'Cantonese Roast Meats', 'Caribbean', 'Castilian', 'Catalan', 'Central Asian', 'Chao Zhou', 'Cheese', 'Chicken Specialities', 'Chinese', 'Chinese Contemporary', 'Chiu Chow', 'Chueotang', 'Classic Cuisine', 'Classic French', 'Colombian', 'Congee', 'Contemporary', 'Corsican', 'Country cooking', 'Crab Specialities', 'Creative', 'Creative British', 'Creative French', 'Creole', 'Croatian', 'Cuban', 'Cuisine', 'Cuisine from Abruzzo', 'Cuisine from Basilicata', 'Cuisine from Franche-Comté', 'Cuisine from Lazio', 'Cuisine from Romagna', 'Cuisine from South West France', 'Cuisine from Valtellina', 'Cuisine from the Aosta Valley', 'Cuisine from the Marches', 'Curry', 'Czech', 'Danish', 'Deli', 'Dim Sum', 'Doganitang', 'Dongbei', 'Dubu', 'Duck Specialities', 'Dumplings', 'Dwaeji-gukbap', 'Eastern European', 'Egyptian', 'Emilian', 'Emirati Cuisine', 'English', 'Ethiopian', 'European', 'European Contemporary', 'Farm to table', 'Filipino', 'Finnish', 'Fish and Chips', 'Flemish', 'Fondue and Raclette', 'French', 'French Contemporary', 'Friulian', 'Fugu / Pufferfish', 'Fujian', 'Fusion', 'Galician', 'Gastropub', 'Gejang', 'German', 'Gomtang', 'Greek', 'Grills', 'Hainanese', 'Hakkanese', 'Hang Zhou', 'Home Cooking', 'Hotpot', 'Huaiyang', 'Hubei', 'Hui Cuisine', 'Hunanese', 'Hunanese and Sichuan', 'Hungarian', 'Indian', 'Indian Vegetarian', 'Indonesian', 'Innovative', 'International', 'Irish', 'Isan', 'Israeli', 'Italian', 'Italian Contemporary', 'Italian and Japanese', 'Italian-American', 'Izakaya', 'Jamaican', 'Japan', 'Japanese', 'Japanese Contemporary', 'Japanese Steakhouse', 'Jiangzhe', 'Jokbal', 'Kalguksu', 'Korean', 'Korean Contemporary', 'Kushiage', 'Kyoto', 'Lamb Specialities', 'Lao', 'Latin American', 'Lebanese', 'Ligurian', 'Lombardian', 'Lyonnaise', 'Macanese', 'Malaysian', 'Mandu', 'Mantuan', 'Meats and Grills', 'Meats and Seafood', 'Mediterranean Cuisine', 'Memil-guksu', 'Mexican', 'Middle Eastern', 'Milanese', 'Modern British', 'Modern Cuisine', 'Modern French', 'Moroccan', 'Naengmyeon', 'Nakagyo-ku', 'Nepali', 'Ningbo', 'Noodles', 'Noodles and Congee', 'North African', 'North American', 'Northern Thai', 'Norwegian', 'Obanzai', 'Oden', 'Okonomiyaki', 'Onigiri', 'Organic', 'Oyster Specialities', 'Pakistani', 'Peranakan', 'Persian', 'Peruvian', 'Piedmontese', 'Pizza', 'Polish', 'Pork', 'Portuguese', 'Provençal', 'Puerto Rican', 'Ramen', 'Regional Cuisine', 'Regional European', 'Rice Dishes', 'Roman', 'Russian', 'Sardinian', 'Savoyard', 'Scandinavian', 'Scottish', 'Seafood', 'Seasonal Cuisine', 'Seolleongtang', 'Shaanxi', 'Shabu-shabu', 'Shandong', 'Shanghainese', 'Sharing', 'Shellfish Specialities', 'Shojin', 'Shun Tak', 'Sichuan', 'Sicilian', 'Singaporean', 'Singaporean and Malaysian', 'Small eats', 'Smørrebrød', 'Soba', 'South African', 'South American', 'South East Asian', 'South Indian', 'South Tyrolean', 'Southern', 'Southern Thai', 'Spanish', 'Spanish Contemporary', 'Sri Lankan', 'Steakhouse', 'Street Food', 'Sujebi', 'Sukiyaki', 'Sushi', 'Swabian', 'Swedish', 'Swiss', 'Taiwanese', 'Taiwanese contemporary', 'Taizhou', 'Tempura', 'Teochew', 'Teppanyaki', 'Tex-Mex', 'Thai', 'Thai and Vietnamese', 'Thai contemporary', 'Thai-Chinese', 'Tibetan', 'Tonkatsu', 'Traditional British', 'Traditional Cuisine', 'Turkish', 'Tuscan', 'Udon', 'Umbrian', 'Unagi / Freshwater Eel', 'Vegan', 'Vegetarian', 'Venetian', 'Venezuelan', 'Vietnamese', 'Vietnamese Contemporary', 'World Cuisine', 'Xibei', 'Xinjiang', 'Yakitori', 'Yoshoku', 'Yukhoe', 'Yunnanese', 'Zhejiang'
		);
    END IF;
	CREATE TABLE IF NOT EXISTS Restaurants (
	    restaurant_id SERIAL PRIMARY KEY,
	    r_owner VARCHAR(100) REFERENCES Users(username) ON UPDATE CASCADE ON DELETE CASCADE,
	    r_name VARCHAR(255) NOT NULL,
	    avg_price DECIMAL(10, 2) NOT NULL,
	    delivery BOOLEAN NOT NULL,
	    booking BOOLEAN NOT NULL,
	    r_type COUSINE NOT NULL,
	    latitude DECIMAL(9, 6) NOT NULL,
	    longitude DECIMAL(9, 6) NOT NULL,
	    address_id SERIAL REFERENCES Addresses(address_id) ON UPDATE CASCADE ON DELETE NO ACTION,
		CONSTRAINT check_latitude CHECK (latitude BETWEEN -90 AND 90),
		CONSTRAINT check_longitude CHECK (longitude BETWEEN -180 AND 180),
		CONSTRAINT check_avg_price CHECK (avg_price > 0)
	);
END $$;